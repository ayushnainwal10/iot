<!DOCTYPE html>
<html>

<head>
  <title>ESP32 Sensor Data</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://www.gstatic.com/charts/loader.js"></script>
  <script>
    google.charts.load('current', { 'packages': ['gauge', 'corechart'] });
    google.charts.setOnLoadCallback(drawChart);

    function drawChart() {
      // Fetch data from ThingSpeak
      $.getJSON('https://api.thingspeak.com/channels/2395883/feeds.json?results=1', function (data) {
        var temperature = parseFloat(data.feeds[0].field1);
        var humidity = parseFloat(data.feeds[0].field2);
        var alcoholLevel = parseFloat(data.feeds[0].field3);

        // Temperature Gauge
        var temperatureData = google.visualization.arrayToDataTable([
          ['Label', 'Value'],
          ['Temperature', temperature]
        ]);
        var temperatureOptions = {
          width: 400, height: 120,
          redFrom: 90, redTo: 100,
          yellowFrom: 80, yellowTo: 90,
          minorTicks: 5
        };
        var temperatureChart = new google.visualization.Gauge(document.getElementById('temperature_chart'));
        temperatureChart.draw(temperatureData, temperatureOptions);

        // Humidity Gauge
        var humidityData = google.visualization.arrayToDataTable([
          ['Label', 'Value'],
          ['Humidity', humidity]
        ]);
        var humidityOptions = {
          width: 400, height: 120,
          redFrom: 80, redTo: 100,
          yellowFrom: 60, yellowTo: 80,
          minorTicks: 5
        };
        var humidityChart = new google.visualization.Gauge(document.getElementById('humidity_chart'));
        humidityChart.draw(humidityData, humidityOptions);

        // Alcohol Level Gauge
        var alcoholData = google.visualization.arrayToDataTable([
          ['Label', 'Value'],
          ['Alcohol Level', alcoholLevel]
        ]);
        var alcoholOptions = {
          width: 400, height: 120,
          redFrom: 800, redTo: 1000,
          yellowFrom: 600, yellowTo: 800,
          minorTicks: 5
        };
        var alcoholChart = new google.visualization.Gauge(document.getElementById('alcohol_chart'));
        alcoholChart.draw(alcoholData, alcoholOptions);
      });
    }
  </script>
</head>

<body>
  <h1>ESP32 Sensor Data</h1>
  <div id="temperature_chart"></div>
  <div id="humidity_chart"></div>
  <div id="alcohol_chart"></div>
</body>

</html>
